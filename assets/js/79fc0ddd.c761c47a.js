(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[108],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return d},kt:function(){return g}});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=i.createContext({}),u=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=u(e.components);return i.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=u(t),g=r,p=m["".concat(l,".").concat(g)]||m[g]||c[g]||a;return t?i.createElement(p,o(o({ref:n},d),{},{components:t})):i.createElement(p,o({ref:n},d))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<a;u++)o[u]=t[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3962:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u},default:function(){return c}});var i=t(2122),r=t(9756),a=(t(7294),t(3905)),o=["components"],s={},l={unversionedId:"Vorbereitung/MQTT Broker",id:"Vorbereitung/MQTT Broker",isDocsHomePage:!1,title:"MQTT",description:"MQTT: Der Standard f\xfcr IoT-Messaging MQTT ist ein OASIS-Standard-Messaging-Protokoll f\xfcr das Internet der Dinge (IoT). Es ist als extrem ressourcenschonende f\xfcr Maschinen konzipierte Methode, um Nachrichten zu ver\xf6ffentlichen bzw. zu lesen. Die geringe Datenmenge ist daher die ideale Verbindung von Ger\xe4ten/Maschinen die \xfcber weite Entfernungen miteinander kommunizieren. MQTT wird heute in einer Vielzahl von Branchen eingesetzt, wie z. B. Automobil, Fertigung, Telekommunikation, \xd6l und Gas usw.",source:"@site/docs/Vorbereitung/MQTT Broker.md",sourceDirName:"Vorbereitung",slug:"/Vorbereitung/MQTT Broker",permalink:"/Anleitungen/docs/Vorbereitung/MQTT Broker",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/Vorbereitung/MQTT Broker.md",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Was wird alles ben\xf6tigt?",permalink:"/Anleitungen/docs/Vorbereitung/intro Kopie"},next:{title:"Visual Studio Code",permalink:"/Anleitungen/docs/Vorbereitung/Visual Studio Code"}},u=[{value:"MQTT Broker Add-on - Installation und Konfiguration",id:"mqtt-broker-add-on---installation-und-konfiguration",children:[]},{value:"Ist MQTT richtig eingestellt?",id:"ist-mqtt-richtig-eingestellt",children:[{value:"Ausgabe bei richtigen Einstellungen",id:"ausgabe-bei-richtigen-einstellungen",children:[]},{value:"Funktioniert die Verbindung?",id:"funktioniert-die-verbindung",children:[]}]},{value:"Home Assistant Integration",id:"home-assistant-integration",children:[]}],d={toc:u};function c(e){var n=e.components,s=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},d,s,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("details",null," ",(0,a.kt)("summary",null,"MQTT: Der Standard f\xfcr IoT-Messaging")," MQTT ist ein OASIS-Standard-Messaging-Protokoll f\xfcr das Internet der Dinge (IoT). Es ist als extrem ressourcenschonende f\xfcr Maschinen konzipierte Methode, um Nachrichten zu ver\xf6ffentlichen bzw. zu lesen. Die geringe Datenmenge ist daher die ideale Verbindung von Ger\xe4ten/Maschinen die \xfcber weite Entfernungen miteinander kommunizieren. MQTT wird heute in einer Vielzahl von Branchen eingesetzt, wie z. B. Automobil, Fertigung, Telekommunikation, \xd6l und Gas usw. "),(0,a.kt)("h2",{id:"mqtt-broker-add-on---installation-und-konfiguration"},"MQTT Broker Add-on - Installation und Konfiguration"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(6383).Z})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Klicken Sie auf Supervisor -> Add-On Store und unter den ",(0,a.kt)("strong",{parentName:"li"},"Official Add-ons")," findet sich der ",(0,a.kt)("em",{parentName:"li"},"Mosquitto broker"),". Klicken Sie hierauf und anschlie\xdfend auf Installieren."),(0,a.kt)("li",{parentName:"ol"},"Nachdem der Installation klicken Sie auf ",(0,a.kt)("em",{parentName:"li"},"Konfiguration")," und f\xfcgen unter ",(0,a.kt)("inlineCode",{parentName:"li"},"logins:")," f\xfcr frigate einen neuen Nutzer mit einem Passwort hinzu. In diesem Beispiel ist der Nutzer ",(0,a.kt)("inlineCode",{parentName:"li"},"frigate")," und das Passwort ",(0,a.kt)("inlineCode",{parentName:"li"},"frigatepassword"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"logins:\n  - username: frigate\n    password: frigatepassword\nanonymous: true\ncustomize:\n  active: false\n  folder: mosquitto\ncertfile: fullchain.pem\nkeyfile: privkey.pem\nrequire_certificate: false\n")),(0,a.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Hinweis")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Username kann nicht ",(0,a.kt)("inlineCode",{parentName:"p"},"homeassistant")," sein, da dieser bereits intern von Home Assistant verwendet wird. Sie k\xf6nnen in der Konfigurationsdatei von frigate ",(0,a.kt)("inlineCode",{parentName:"p"},"frigate.yml")," auch den user ",(0,a.kt)("inlineCode",{parentName:"p"},"homeassistant")," verwenden, m\xfcssen aber hierzu das vom System generierte Passwort nutzen!"))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Klicken Sie untern rechts auf ",(0,a.kt)("inlineCode",{parentName:"li"},"Speichern")," und dann auf ",(0,a.kt)("inlineCode",{parentName:"li"},"Information")," in der oberen Zeile, um wieder auf die \xdcbersichtsseite des Add-ons zu kommen. Hier klicken Sie auf ",(0,a.kt)("inlineCode",{parentName:"li"},"Starten"),", wenn alles richtig Eingestellt worden ist, ist der MQTT Broker jetzt bereit und signalisiert dieses durch einen gr\xfcnen Punkt oben rechts in der Ecke."),(0,a.kt)("li",{parentName:"ol"},"\xdcberpr\xfcfen Sie die Richtigkeit der Einstellungen in dem Sie in der oberen Zeile auf ",(0,a.kt)("inlineCode",{parentName:"li"},"Protokoll"),"klicken. Die Ausgabe sieht dann in etwa so aus:")),(0,a.kt)("h2",{id:"ist-mqtt-richtig-eingestellt"},"Ist MQTT richtig eingestellt?"),(0,a.kt)("p",null,"Woran man erkennt, ob MQTT richtig eingestellt wurde? An der Ausgabe der Log-Datei zu finden unter ",(0,a.kt)("inlineCode",{parentName:"p"},"Protokoll")," im oberen Bereich"),(0,a.kt)("h3",{id:"ausgabe-bei-richtigen-einstellungen"},"Ausgabe bei richtigen Einstellungen"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"[11:51:33] INFO: Setup mosquitto configuration\n[11:51:33] INFO: Found local users inside config\n[11:51:33] INFO: Initialize Hass.io Add-on services\n[11:51:33] INFO: Initialize Home Assistant discovery\n[11:51:33] INFO: Start Mosquitto daemon\n1623923493: mosquitto version 1.6.3 starting\n1623923493: Config loaded from /etc/mosquitto.conf.\n1623923493: Loading plugin: /usr/share/mosquitto/auth-plug.so\n1623923493:  \u251c\u2500\u2500 Username/password checking enabled.\n1623923493:  \u251c\u2500\u2500 TLS-PSK checking enabled.\n1623923493:  \u2514\u2500\u2500 Extended authentication not enabled.\n1623923493: |-- *** auth-plug: startup\n1623923493: Opening ipv4 listen socket on port 1883.\n1623923493: Opening ipv6 listen socket on port 1883.\n1623923493: Opening websockets listen socket on port 1884.\n1623923493: Opening ipv4 listen socket on port 8883.\n1623923493: Opening ipv6 listen socket on port 8883.\n1623923493: Opening websockets listen socket on port 8884.\n1623923493: Warning: Mosquitto should not be run as root/administrator.\n")),(0,a.kt)("h3",{id:"funktioniert-die-verbindung"},"Funktioniert die Verbindung?"),(0,a.kt)("p",null,"Mit einem MQTT Client kann man schnell erkennen, ob die Verbindung mit MQTT funktioniert, der Nutername und das Passwort richtig sind. Unter folgendem gibt es einen Client der f\xfcr die g\xe4nigsten Betriebssysteme verf\xfcgbar ist: ",(0,a.kt)("a",{parentName:"p",href:"http://mqtt-explorer.com"},"MQTT Explorer")," "),(0,a.kt)("h2",{id:"home-assistant-integration"},"Home Assistant Integration"),(0,a.kt)("p",null,'Bisher haben wir "nur" einen MQTT Broker installiert. Home Assistant hat zwar bereits mitbekommen, kann aber damit nichts anfangen so fern wir keine weiteren Einstellungen vornehmen. Damit Home Assistant wei\xdf, das MQTT jetzt genutzt werden soll, m\xfcssen wir es "integrieren". Unter dem Punkt ',(0,a.kt)("inlineCode",{parentName:"p"},"Einstellungen -> Integrationen")," werden diese Einstellungen vorgenommen. "),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(8221).Z})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Klicken Sie auf ",(0,a.kt)("inlineCode",{parentName:"li"},"Einstellungen -> Integrationen")),(0,a.kt)("li",{parentName:"ol"},"Sie erkennen die neue MQTT Integration an dem Schriftzug ",(0,a.kt)("inlineCode",{parentName:"li"},"Entdeckt!")," mit einem blauen Rand versehen. Klicken Sie auf ",(0,a.kt)("inlineCode",{parentName:"li"},"Konfigurieren")," und anschlie\xdfend auf ",(0,a.kt)("inlineCode",{parentName:"li"},"\xc0bsenden")),(0,a.kt)("li",{parentName:"ol"},"Fertig! Home Assistant kann jetzt MQTT Nachrichten interpretieren und gleichzeitig versenden.")))}c.isMDXComponent=!0},6383:function(e,n,t){"use strict";n.Z=t.p+"assets/images/install_mqtt-8a31cf0f2e86c79ba2b2fd660b060a2e.gif"},8221:function(e,n,t){"use strict";n.Z=t.p+"assets/images/install_mqtt_integration-812008cac94f2c7f2c87f724c5f5e1e8.gif"}}]);